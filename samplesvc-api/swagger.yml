swagger: '2.0'
info:
  title: Sample Service Api
  description: The Sample service manages Survey Samples and forms part of the Response Management product.
  version: "9.36.0"
schemes:
  - http
basePath: /samples
produces:
  - application/json
tags:
  - name: Sample
    description: Management of Survey Sample
paths:
  /{sampleId}:
    put:
      summary: Updates Sample Summary state
      description: Updates Sample Summary state and returns updated SummarySample
      parameters:
        - name: Accept
          in: header
          description: Response type, application/json.
          required: false
          type: string
        - name: sampleId
          in: path
          description: Sample Id
          required: true
          type: integer
      tags:
        - Sample
      responses:
        200:
          description: An updated SampleSummary
          schema:
            type: object
            items:
              $ref: '#/definitions/SampleSummary'
        404:
          description: Sample Units not found
          schema:
            $ref: '#/definitions/Error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
  /{surveyref}/{exercisedatetime}:
    get:
      summary: List of Sample Units
      description: Returns a list of Sample Units with the associated surveyref and exercisedatetime
      parameters:
        - name: Accept
          in: header
          description: Response type, application/json.
          required: false
          type: string
        - name: surveyref
          in: path
          description: Survey Ref
          required: true
          type: string
        - name: exercisedatetime
          in: path
          description: EffectiveStartDateTime of the SampleSummary
          required: true
          type: string
      tags:
        - Sample
      responses:
        200:
          description: An array of SampleUnits
          schema:
            type: array
            items:
              $ref: '#/definitions/SampleUnits'
        404:
          description: SampleSummary not found
          schema:
            $ref: '#/definitions/Error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
definitions:
  Error:
    type: object
    properties:
      code:
        description: Error code
        type: string
      timestamp:
        description:  Unique error timestamp that can be searched for in logs
        type: integer
      message:
        description: Error message
        type: string
  SampleSummary:
    type: object
    properties:
      sampleid:
        description: Id of Sample Summary
        type: integer
      effectivestartdatetime:
        description:  Effective Survey start dateTime
        type: string
        format: date-time
      effectiveenddatetime:
        description:  Effective Survey end dateTime
        type: string
        format: date-time
      surveyref:
        description: Survey Reference
        type: string
      ingestdatetime:
        description:  Timestamp of Survey ingestion
        type: string
        format: date-time
      state:
        description: Sample Summary state
        type: string
  SampleUnit:
    type: object
    properties:
      sampleunitid:
        description: Id of Sample Unit
        type: integer
      sampleid:
        description:  Id of associated Sample Summary
        type: integer
      sampleunitref:
        description: Sample Unit Reference
        type: string
      sampleunittype:
        description: Sample Unit Type
        type: string
  SampleUnits:
    type: array
    items:
      $ref: '#/definitions/SampleUnit'